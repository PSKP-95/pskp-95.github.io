<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>XX - Parikshit&#x27;s Notebook</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="mathematics/index.html">Mathematics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="mathematics/formulas/index.html">Formulas</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="mathematics/formulas/algebra.html">Algebra</a></li></ol></li></ol></li><li class="chapter-item "><a href="computer-science/index.html">Computer Science</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="computer-science/os/index.html">Operating System</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="computer-science/os/process.html">Process</a></li><li class="chapter-item "><a href="computer-science/os/ipc.html">Interprocess Communication</a></li></ol></li><li class="chapter-item "><a href="computer-science/dbms/index.html">Database Management System</a></li><li class="chapter-item "><a href="computer-science/networking/index.html">Computer Network</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="computer-science/networking/reference-models/index.html">Reference Models</a></li><li class="chapter-item "><a href="computer-science/networking/physical-layer/index.html">Physical Layer</a></li><li class="chapter-item "><a href="computer-science/networking/data-link-layer/index.html">Data Link Layer</a></li><li class="chapter-item "><a href="computer-science/networking/network-layer/index.html">Network Layer</a></li><li class="chapter-item "><a href="computer-science/networking/transport-layer/index.html">Transport Layer</a></li><li class="chapter-item "><a href="computer-science/networking/application-layer/index.html">Application Layer</a></li></ol></li><li class="chapter-item "><a href="computer-science/dsa/index.html">Data Structure & Algorithms</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="computer-science/dsa/stl-cheatsheet.html">STL Cheatsheet</a></li><li class="chapter-item "><a href="computer-science/dsa/searching.html">Searching</a></li><li class="chapter-item "><a href="computer-science/dsa/sorting.html">Sorting</a></li></ol></li><li class="chapter-item "><a href="computer-science/toc/index.html">Theory of Computation</a></li></ol></li><li class="chapter-item "><a href="aiml/index.html">AI/ML</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="aiml/ml-algos/index.html">ML Algorithms</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="aiml/ml-algos/regression/index.html">Regression</a></li><li class="chapter-item "><a href="aiml/ml-algos/classification/index.html">Classification</a></li><li class="chapter-item "><a href="aiml/ml-algos/clustering/index.html">Clustering</a></li><li class="chapter-item "><a href="aiml/ml-algos/forecasting/index.html">Forecasting</a></li></ol></li><li class="chapter-item "><a href="aiml/deep-learning/index.html">Deep Learning</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="aiml/deep-learning/full-connected/00-basics.html">Fully Connected</a></li><li class="chapter-item "><a href="aiml/deep-learning/activation-functions/index.html">Activation Functions</a></li></ol></li></ol></li><li class="chapter-item "><a href="linux/index.html">Linux</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="linux/networking/index.html">Networking</a></li></ol></li><li class="chapter-item expanded "><a href="economics/index.html">Economics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="economics/indian-economics/index.html">Indian Economics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="economics/indian-economics/01-introduction.html">01 Introduction</a></li><li class="chapter-item "><a href="economics/indian-economics/02-growth-development-and-happiness.html">02 Growth, Development & Happiness</a></li><li class="chapter-item expanded "><a href="SPEC.html" class="active">XX</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Parikshit&#x27;s Notebook</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="container-network-interface-cni-specification"><a class="header" href="#container-network-interface-cni-specification">Container Network Interface (CNI) Specification</a></h1>
<ul>
<li><a href="#container-network-interface-cni-specification">Container Network Interface (CNI) Specification</a>
<ul>
<li><a href="#version">Version</a>
<ul>
<li><a href="#released-versions">Released versions</a></li>
</ul>
</li>
<li><a href="#overview">Overview</a></li>
<li><a href="#summary">Summary</a></li>
<li><a href="#section-1-network-configuration-format">Section 1: Network configuration format</a>
<ul>
<li><a href="#configuration-format">Configuration format</a>
<ul>
<li><a href="#plugin-configuration-objects">Plugin configuration objects:</a></li>
<li><a href="#example-configuration">Example configuration</a></li>
</ul>
</li>
<li><a href="#version-considerations">Version considerations</a></li>
</ul>
</li>
<li><a href="#section-2-execution-protocol">Section 2: Execution Protocol</a>
<ul>
<li><a href="#overview-1">Overview</a></li>
<li><a href="#parameters">Parameters</a></li>
<li><a href="#errors">Errors</a></li>
<li><a href="#cni-operations">CNI operations</a>
<ul>
<li><a href="#add-add-container-to-network-or-apply-modifications"><code>ADD</code>: Add container to network, or apply modifications</a></li>
<li><a href="#del-remove-container-from-network-or-un-apply-modifications"><code>DEL</code>: Remove container from network, or un-apply modifications</a></li>
<li><a href="#check-check-containers-networking-is-as-expected"><code>CHECK</code>: Check container's networking is as expected</a></li>
<li><a href="#status-check-plugin-status"><code>STATUS</code>: Check plugin status</a></li>
<li><a href="#version-probe-plugin-version-support"><code>VERSION</code>: probe plugin version support</a></li>
<li><a href="#gc-clean-up-any-stale-resources"><code>GC</code>: Clean up any stale resources</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#section-3-execution-of-network-configurations">Section 3: Execution of Network Configurations</a>
<ul>
<li><a href="#lifecycle--ordering">Lifecycle &amp; Ordering</a></li>
<li><a href="#attachment-parameters">Attachment Parameters</a></li>
<li><a href="#adding-an-attachment">Adding an attachment</a></li>
<li><a href="#deleting-an-attachment">Deleting an attachment</a></li>
<li><a href="#checking-an-attachment">Checking an attachment</a></li>
<li><a href="#garbage-collecting-a-network">Garbage-collecting a network</a></li>
<li><a href="#deriving-request-configuration-from-plugin-configuration">Deriving request configuration from plugin configuration</a>
<ul>
<li><a href="#deriving-runtimeconfig">Deriving <code>runtimeConfig</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#section-4-plugin-delegation">Section 4: Plugin Delegation</a>
<ul>
<li><a href="#delegated-plugin-protocol">Delegated Plugin protocol</a></li>
<li><a href="#delegated-plugin-execution-procedure">Delegated plugin execution procedure</a></li>
</ul>
</li>
<li><a href="#section-5-result-types">Section 5: Result Types</a>
<ul>
<li><a href="#add-success">ADD Success</a>
<ul>
<li><a href="#delegated-plugins-ipam">Delegated plugins (IPAM)</a></li>
</ul>
</li>
<li><a href="#version-success">VERSION Success</a></li>
<li><a href="#error">Error</a></li>
<li><a href="#version-1">Version</a></li>
</ul>
</li>
<li><a href="#appendix-examples">Appendix: Examples</a>
<ul>
<li><a href="#add-example">Add example</a></li>
<li><a href="#check-example">Check example</a></li>
<li><a href="#delete-example">Delete example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="version"><a class="header" href="#version">Version</a></h2>
<p>This is CNI <strong>spec</strong> version <strong>1.1.0</strong>.</p>
<p>Note that this is <strong>independent from the version of the CNI library and plugins</strong> in this repository (e.g. the versions of <a href="https://github.com/containernetworking/cni/releases">releases</a>).</p>
<h4 id="released-versions"><a class="header" href="#released-versions">Released versions</a></h4>
<p>Released versions of the spec are available as Git tags.</p>
<div class="table-wrapper"><table><thead><tr><th>tag</th><th>spec permalink</th><th>major changes</th></tr></thead><tbody>
<tr><td><a href="https://github.com/containernetworking/cni/releases/tag/spec-v1.0.0"><code>spec-v1.0.0</code></a></td><td><a href="https://github.com/containernetworking/cni/blob/spec-v1.0.0/SPEC.md">spec at v1.0.0</a></td><td>Removed non-list configurations; removed <code>version</code> field of <code>interfaces</code> array</td></tr>
<tr><td><a href="https://github.com/containernetworking/cni/releases/tag/spec-v0.4.0"><code>spec-v0.4.0</code></a></td><td><a href="https://github.com/containernetworking/cni/blob/spec-v0.4.0/SPEC.md">spec at v0.4.0</a></td><td>Introduce the CHECK command and passing prevResult on DEL</td></tr>
<tr><td><a href="https://github.com/containernetworking/cni/releases/tag/spec-v0.3.1"><code>spec-v0.3.1</code></a></td><td><a href="https://github.com/containernetworking/cni/blob/spec-v0.3.1/SPEC.md">spec at v0.3.1</a></td><td>none (typo fix only)</td></tr>
<tr><td><a href="https://github.com/containernetworking/cni/releases/tag/spec-v0.3.0"><code>spec-v0.3.0</code></a></td><td><a href="https://github.com/containernetworking/cni/blob/spec-v0.3.0/SPEC.md">spec at v0.3.0</a></td><td>rich result type, plugin chaining</td></tr>
<tr><td><a href="https://github.com/containernetworking/cni/releases/tag/spec-v0.2.0"><code>spec-v0.2.0</code></a></td><td><a href="https://github.com/containernetworking/cni/blob/spec-v0.2.0/SPEC.md">spec at v0.2.0</a></td><td>VERSION command</td></tr>
<tr><td><a href="https://github.com/containernetworking/cni/releases/tag/spec-v0.1.0"><code>spec-v0.1.0</code></a></td><td><a href="https://github.com/containernetworking/cni/blob/spec-v0.1.0/SPEC.md">spec at v0.1.0</a></td><td>initial version</td></tr>
</tbody></table>
</div>
<p><em>Do not rely on these tags being stable.  In the future, we may change our mind about which particular commit is the right marker for a given historical spec version.</em></p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>This document proposes a generic plugin-based networking solution for application containers on Linux, the <em>Container Networking Interface</em>, or <em>CNI</em>.</p>
<p>For the purposes of this proposal, we define three terms very specifically:</p>
<ul>
<li><em>container</em> is a network isolation domain, though the actual isolation technology is not defined by the specification. This could be a <a href="http://man7.org/linux/man-pages/man7/namespaces.7.html">network namespace</a> or a virtual machine, for example.</li>
<li><em>network</em> refers to a group of endpoints that are uniquely addressable that can communicate amongst each other. This could be either an individual container (as specified above), a machine, or some other network device (e.g. a router). Containers can be conceptually <em>added to</em> or <em>removed from</em> one or more networks.</li>
<li><em>runtime</em> is the program responsible for executing CNI plugins.</li>
<li><em>plugin</em> is a program that applies a specified network configuration.</li>
</ul>
<p>This document aims to specify the interface between "runtimes" and "plugins". The key words "must", "must not", "required", "shall", "shall not", "should", "should not", "recommended", "may" and "optional" are used as specified in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>.</p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>The CNI specification defines:</p>
<ol>
<li>A format for administrators to define network configuration.</li>
<li>A protocol for container runtimes to make requests to network plugins.</li>
<li>A procedure for executing plugins based on a supplied configuration.</li>
<li>A procedure for plugins to delegate functionality to other plugins.</li>
<li>Data types for plugins to return their results to the runtime.</li>
</ol>
<h2 id="section-1-network-configuration-format"><a class="header" href="#section-1-network-configuration-format">Section 1: Network configuration format</a></h2>
<p>CNI defines a network configuration format for administrators. It contains
directives for both the container runtime as well as the plugins to consume. At
plugin execution time, this configuration format is interpreted by the runtime and
transformed in to a form to be passed to the plugins.</p>
<p>In general, the network configuration is intended to be static. It can conceptually
be thought of as being "on disk", though the CNI specification does not actually
require this.</p>
<h3 id="configuration-format"><a class="header" href="#configuration-format">Configuration format</a></h3>
<p>A network configuration consists of a JSON object with the following keys:</p>
<ul>
<li><code>cniVersion</code> (string): <a href="https://semver.org">Semantic Version 2.0</a> of CNI specification to which this configuration list and all the individual configurations conform. Currently "1.1.0"</li>
<li><code>cniVersions</code> (string list): List of all CNI versions which this configuration supports. See <a href="#version-selection">version selection</a> below.</li>
<li><code>name</code> (string): Network name. This should be unique across all network configurations on a host (or other administrative domain).  Must start with an alphanumeric character, optionally followed by any combination of one or more alphanumeric characters, underscore, dot (.) or hyphen (-). Must not contain characters disallowed in file paths.</li>
<li><code>disableCheck</code> (boolean): Either <code>true</code> or <code>false</code>.  If <code>disableCheck</code> is <code>true</code>, runtimes must not call <code>CHECK</code> for this network configuration list.  This allows an administrator to prevent <code>CHECK</code>ing where a combination of plugins is known to return spurious errors.</li>
<li><code>disableGC</code> (boolean): Either <code>true</code> or <code>false</code>.  If <code>disableGC</code> is <code>true</code>, runtimes must not call <code>GC</code> for this network configuration list.  This allows an administrator to prevent <code>GC</code>ing when it is known that garbage collection may have undesired effects (e.g. shared configuration between multiple runtimes).</li>
<li><code>loadOnlyInlinedPlugins</code> (boolean): Either <code>true</code> or <code>false</code>. If <code>false</code> (default), indicates <a href="#plugin-configuration-objects">plugin configuration objects</a> can be aggregated from multiple sources. Any valid plugin configuration objects aggregated from other sources must be appended to the final list of <code>plugins</code> for that network name. If set to <code>true</code>, indicates that valid plugin configuration objects aggregated from sources other than the main network configuration will be ignored. If <code>plugins</code> is not present in the network configuration, <code>loadOnlyInlinedPlugins</code> cannot be set to <code>true</code>.</li>
<li><code>plugins</code> (list): A list of inlined <a href="#plugin-configuration-objects">plugin configuration objects</a>. If this key is populated with inlined plugin objects, and <code>loadOnlyInlinedPlugins</code> is true, the final set of plugins for a network must consist of all the plugin objects in this list, merged with all the plugins loaded from the sibling folder with the same name as the network.</li>
</ul>
<h4 id="plugin-configuration-objects"><a class="header" href="#plugin-configuration-objects">Plugin configuration objects:</a></h4>
<p>Runtimes may aggregate plugin configuration objects from multiple sources, and must unambiguously associate each loaded plugin configuration object with a single, valid network configuration. All aggregated plugin configuration objects must be validated, and each plugin with a valid configuration object must be invoked.</p>
<p>Plugin configuration objects may contain additional fields beyond the ones defined here. The runtime MUST pass through these fields, unchanged, to the invoked plugin, as defined in section 3.</p>
<p><strong>Required keys:</strong></p>
<ul>
<li><code>type</code> (string): Matches the name of the CNI plugin binary on disk. Must not contain characters disallowed in file paths for the system (e.g. / or \).</li>
</ul>
<p><strong>Optional keys, used by the protocol:</strong></p>
<ul>
<li><code>capabilities</code> (dictionary): Defined in <a href="#Deriving-runtimeConfig">section 3</a></li>
</ul>
<p><strong>Reserved keys, used by the protocol:</strong>
These keys are generated by the runtime at execution time, and thus should not be used in configuration.</p>
<ul>
<li><code>runtimeConfig</code></li>
<li><code>args</code></li>
<li>Any keys starting with <code>cni.dev/</code></li>
</ul>
<p><strong>Optional keys, well-known:</strong>
These keys are not used by the protocol, but have a standard meaning to plugins.
Plugins that consume any of these configuration keys should respect their intended semantics.</p>
<ul>
<li><code>ipMasq</code> (boolean): If supported by the plugin, sets up an IP masquerade on the host for this network. This is necessary if the host will act as a gateway to subnets that are not able to route to the IP assigned to the container.</li>
<li><code>ipam</code> (dictionary): Dictionary with IPAM (IP Address Management) specific values:
<ul>
<li><code>type</code> (string): Refers to the filename of the IPAM plugin executable. Must not contain characters disallowed in file paths for the system (e.g. / or \).</li>
</ul>
</li>
<li><code>dns</code> (dictionary, optional): Dictionary with DNS specific values:
<ul>
<li><code>nameservers</code> (list of strings, optional): list of a priority-ordered list of DNS nameservers that this network is aware of. Each entry in the list is a string containing either an IPv4 or an IPv6 address.</li>
<li><code>domain</code> (string, optional): the local domain used for short hostname lookups.</li>
<li><code>search</code> (list of strings, optional): list of priority ordered search domains for short hostname lookups. Will be preferred over <code>domain</code> by most resolvers.</li>
<li><code>options</code> (list of strings, optional): list of options that can be passed to the resolver</li>
</ul>
</li>
</ul>
<p><strong>Other keys:</strong>
Plugins may define additional fields that they accept and may generate an error if called with unknown fields. Runtimes must preserve unknown fields in plugin configuration objects when transforming for execution.</p>
<h4 id="example-configuration"><a class="header" href="#example-configuration">Example configuration</a></h4>
<p>The following is an example JSON representation of a network configuration <code>dbnet</code> with three plugin configurations (<code>bridge</code>, <code>tuning</code>, and <code>portmap</code>).</p>
<pre><code class="language-jsonc">{
  "cniVersion": "1.1.0",
  "cniVersions": ["0.3.1", "0.4.0", "1.0.0", "1.1.0"],
  "name": "dbnet",
  "plugins": [
    {
      "type": "bridge",
      // plugin specific parameters
      "bridge": "cni0",
      "keyA": ["some more", "plugin specific", "configuration"],

      "ipam": {
        "type": "host-local",
        // ipam specific
        "subnet": "10.1.0.0/16",
        "gateway": "10.1.0.1",
        "routes": [
            {"dst": "0.0.0.0/0"}
        ]
      },
      "dns": {
        "nameservers": [ "10.1.0.1" ]
      }
    },
    {
      "type": "tuning",
      "capabilities": {
        "mac": true
      },
      "sysctl": {
        "net.core.somaxconn": "500"
      }
    },
    {
        "type": "portmap",
        "capabilities": {"portMappings": true}
    }
  ]
}
</code></pre>
<h3 id="version-considerations"><a class="header" href="#version-considerations">Version considerations</a></h3>
<p>CNI runtimes, plugins, and network configurations may support multiple CNI specification versions independently. Plugins indicate their set of supported versions through the VERSION command, while network configurations indicate their set of supported versions through the <code>cniVersion</code> and <code>cniVersions</code> fields.</p>
<p>CNI runtimes MUST select the highest supported version from the set of network configuration versions given by the <code>cniVersion</code> and <code>cniVersions</code> fields. Runtimes MAY consider the set of supported plugin versions as reported by the VERSION command when determining available versions.</p>
<p>The CNI protocol follows Semantic Versioning principles, so the configuration format MUST remain backwards and forwards compatible within major versions.</p>
<h2 id="section-2-execution-protocol"><a class="header" href="#section-2-execution-protocol">Section 2: Execution Protocol</a></h2>
<h3 id="overview-1"><a class="header" href="#overview-1">Overview</a></h3>
<p>The CNI protocol is based on execution of binaries invoked by the container runtime. CNI defines the protocol between the plugin binary and the runtime.</p>
<p>A CNI plugin is responsible for configuring a container's network interface in some manner. Plugins fall in to two broad categories:</p>
<ul>
<li>"Interface" plugins, which create a network interface inside the container and ensure it has connectivity.</li>
<li>"Chained" plugins, which adjust the configuration of an already-created interface (but may need to create more interfaces to do so).</li>
</ul>
<p>The runtime passes parameters to the plugin via environment variables and configuration. It supplies configuration via stdin. The plugin returns
a <a href="#Section-5-Result-Types">result</a> on stdout on success, or an error on stderr if the operation fails. Configuration and results are encoded in JSON.</p>
<p>Parameters define invocation-specific settings, whereas configuration is, with some exceptions, the same for any given network.</p>
<p>The runtime must execute the plugin in the runtime's networking domain. (For most cases, this means the root network namespace / <code>dom0</code>).</p>
<h3 id="parameters"><a class="header" href="#parameters">Parameters</a></h3>
<p>Protocol parameters are passed to the plugins via OS environment variables.</p>
<ul>
<li><code>CNI_COMMAND</code>: indicates the desired operation; <code>ADD</code>, <code>DEL</code>, <code>CHECK</code>, <code>GC</code>, or <code>VERSION</code>.</li>
<li><code>CNI_CONTAINERID</code>: Container ID. A unique plaintext identifier for a container, allocated by the runtime. Must not be empty.  Must start with an alphanumeric character, optionally followed by any combination of one or more alphanumeric characters, underscore (), dot (.) or hyphen (-).</li>
<li><code>CNI_NETNS</code>: A reference to the container's "isolation domain". If using network namespaces, then a path to the network namespace (e.g. <code>/run/netns/[nsname]</code>)</li>
<li><code>CNI_IFNAME</code>: Name of the interface to create inside the container; if the plugin is unable to use this interface name it must return an error.</li>
<li><code>CNI_ARGS</code>: Extra arguments passed in by the user at invocation time. Alphanumeric key-value pairs separated by semicolons; for example, "FOO=BAR;ABC=123"</li>
<li><code>CNI_PATH</code>: List of paths to search for CNI plugin executables. Paths are separated by an OS-specific list separator; for example ':' on Linux and ';' on Windows</li>
</ul>
<h3 id="errors"><a class="header" href="#errors">Errors</a></h3>
<p>A plugin must exit with a return code of 0 on success, and non-zero on failure. If the plugin encounters an error, it should output an <a href="#Error">"error" result structure</a> (see below).</p>
<h3 id="cni-operations"><a class="header" href="#cni-operations">CNI operations</a></h3>
<p>CNI defines 5 operations: <code>ADD</code>, <code>DEL</code>, <code>CHECK</code>, <code>GC</code>, and <code>VERSION</code>. These are passed to the plugin via the <code>CNI_COMMAND</code> environment variable.</p>
<h4 id="add-add-container-to-network-or-apply-modifications"><a class="header" href="#add-add-container-to-network-or-apply-modifications"><code>ADD</code>: Add container to network, or apply modifications</a></h4>
<p>A CNI plugin, upon receiving an <code>ADD</code> command, should either</p>
<ul>
<li>create the interface defined by <code>CNI_IFNAME</code> inside the container at <code>CNI_NETNS</code>, or</li>
<li>adjust the configuration of the interface defined by <code>CNI_IFNAME</code> inside the container at <code>CNI_NETNS</code>.</li>
</ul>
<p>If the CNI plugin is successful, it must output a <a href="#Success">result structure</a> (see below) on standard out. If the plugin was supplied a <code>prevResult</code> as part of its input configuration, it MUST handle <code>prevResult</code> by either passing it through, or modifying it appropriately.</p>
<p>If an interface of the requested name already exists in the container, the CNI plugin MUST return with an error.</p>
<p>A runtime should not call <code>ADD</code> twice (without an intervening DEL) for the same <code>(CNI_CONTAINERID, CNI_IFNAME)</code> tuple. This implies that a given container ID may be added to a specific network more than once only if each addition is done with a different interface name.</p>
<p><strong>Input:</strong></p>
<p>The runtime will provide a JSON-serialized plugin configuration object (defined below) on standard in.</p>
<p>Required environment parameters:</p>
<ul>
<li><code>CNI_COMMAND</code></li>
<li><code>CNI_CONTAINERID</code></li>
<li><code>CNI_NETNS</code></li>
<li><code>CNI_IFNAME</code></li>
</ul>
<p>Optional environment parameters:</p>
<ul>
<li><code>CNI_ARGS</code></li>
<li><code>CNI_PATH</code></li>
</ul>
<h4 id="del-remove-container-from-network-or-un-apply-modifications"><a class="header" href="#del-remove-container-from-network-or-un-apply-modifications"><code>DEL</code>: Remove container from network, or un-apply modifications</a></h4>
<p>A CNI plugin, upon receiving a <code>DEL</code> command, should either</p>
<ul>
<li>delete the interface defined by <code>CNI_IFNAME</code> inside the container at <code>CNI_NETNS</code>, or</li>
<li>undo any modifications applied in the plugin's <code>ADD</code> functionality</li>
</ul>
<p>Plugins should generally complete a <code>DEL</code> action without error even if some resources are missing.  For example, an IPAM plugin should generally release an IP allocation and return success even if the container network namespace no longer exists, unless that network namespace is critical for IPAM management. While DHCP may usually send a 'release' message on the container network interface, since DHCP leases have a lifetime this release action would not be considered critical and no error should be returned if this action fails. For another example, the <code>bridge</code> plugin should delegate the DEL action to the IPAM plugin and clean up its own resources even if the container network namespace and/or container network interface no longer exist.</p>
<p>Plugins MUST accept multiple <code>DEL</code> calls for the same (<code>CNI_CONTAINERID</code>, <code>CNI_IFNAME</code>) pair, and return success if the interface in question, or any modifications added, are missing.</p>
<p><strong>Input:</strong></p>
<p>The runtime will provide a JSON-serialized plugin configuration object (defined below) on standard in.</p>
<p>Required environment parameters:</p>
<ul>
<li><code>CNI_COMMAND</code></li>
<li><code>CNI_CONTAINERID</code></li>
<li><code>CNI_IFNAME</code></li>
</ul>
<p>Optional environment parameters:</p>
<ul>
<li><code>CNI_NETNS</code></li>
<li><code>CNI_ARGS</code></li>
<li><code>CNI_PATH</code></li>
</ul>
<h4 id="check-check-containers-networking-is-as-expected"><a class="header" href="#check-check-containers-networking-is-as-expected"><code>CHECK</code>: Check container's networking is as expected</a></h4>
<p><code>CHECK</code> is a way for a runtime to probe the status of an existing container.</p>
<p>Plugin considerations:</p>
<ul>
<li>The plugin must consult the <code>prevResult</code> to determine the expected interfaces and addresses.</li>
<li>The plugin must allow for a later chained plugin to have modified networking resources, e.g. routes, on <code>ADD</code>.</li>
<li>The plugin should return an error if a resource included in the CNI Result type (interface, address or route) was created by the plugin, and is listed in <code>prevResult</code>, but is missing or in an invalid state.</li>
<li>The plugin should return an error if other resources not tracked in the Result type such as the following are missing or are in an invalid state:
<ul>
<li>Firewall rules</li>
<li>Traffic shaping controls</li>
<li>IP reservations</li>
<li>External dependencies such as a daemon required for connectivity</li>
<li>etc.</li>
</ul>
</li>
<li>The plugin should return an error if it is aware of a condition where the container is generally unreachable.</li>
<li>The plugin must handle <code>CHECK</code> being called immediately after an <code>ADD</code>, and therefore should allow a reasonable convergence delay for any asynchronous resources.</li>
<li>The plugin should call <code>CHECK</code> on any delegated (e.g. IPAM) plugins and pass any errors on to its caller.</li>
</ul>
<p>Runtime considerations:</p>
<ul>
<li>A runtime must not call <code>CHECK</code> for a container that has not been <code>ADD</code>ed, or has been <code>DEL</code>eted after its last <code>ADD</code>.</li>
<li>A runtime must not call <code>CHECK</code> if <code>disableCheck</code> is set to <code>true</code> in the <a href="#configuration-format">configuration</a>.</li>
<li>A runtime must include a <code>prevResult</code> field in the network configuration containing the <code>Result</code> of the immediately preceding <code>ADD</code> for the container. The runtime may wish to use libcni's support for caching <code>Result</code>s.</li>
<li>A runtime may choose to stop executing <code>CHECK</code> for a chain when a plugin returns an error.</li>
<li>A runtime may execute <code>CHECK</code> from immediately after a successful <code>ADD</code>, up until the container is <code>DEL</code>eted from the network.</li>
<li>A runtime may assume that a failed <code>CHECK</code> means the container is permanently in a misconfigured state.</li>
</ul>
<p><strong>Input:</strong></p>
<p>The runtime will provide a json-serialized plugin configuration object (defined below) on standard in.</p>
<p>Required environment parameters:</p>
<ul>
<li><code>CNI_COMMAND</code></li>
<li><code>CNI_CONTAINERID</code></li>
<li><code>CNI_NETNS</code></li>
<li><code>CNI_IFNAME</code></li>
</ul>
<p>Optional environment parameters:</p>
<ul>
<li><code>CNI_ARGS</code></li>
<li><code>CNI_PATH</code></li>
</ul>
<p>All parameters, with the exception of <code>CNI_PATH</code>, must be the same as the corresponding <code>ADD</code> for this container.</p>
<h4 id="status-check-plugin-status"><a class="header" href="#status-check-plugin-status"><code>STATUS</code>: Check plugin status</a></h4>
<p><code>STATUS</code> is a way for a runtime to determine the readiness of a network plugin.</p>
<p>A plugin must exit with a zero (success) return code if the plugin is ready to service ADD requests. If the plugin knows that it is not able to service ADD requests, it must exit with a non-zero return code and output an error on standard out (see below).</p>
<p>For example, if a plugin relies on an external service or daemon, it should return an error to <code>STATUS</code> if that service is unavailable. Likewise, if a plugin has a limited number of resources (e.g. IP addresses, hardware queues), it should return an error if those resources are exhausted and no new <code>ADD</code> requests can be serviced.</p>
<p>The following error codes are defined in the context of <code>STATUS</code>:</p>
<ul>
<li>50: The plugin is not available (i.e. cannot service <code>ADD</code> requests)</li>
<li>51: The plugin is not available, and existing containers in the network may have limited connectivity.</li>
</ul>
<p>Plugin considerations:</p>
<ul>
<li>Status is purely informational. A plugin MUST NOT rely on <code>STATUS</code> being called.</li>
<li>Plugins should always expect other CNI operations (like <code>ADD</code>, <code>DEL</code>, etc) even if <code>STATUS</code> returns an error. <code>STATUS</code> does not prevent other runtime requests.</li>
<li>If a plugin relies on a delegated plugin (e.g. IPAM) to service <code>ADD</code> requests, it must also execute a <code>STATUS</code> request to that plugin when it receives a <code>STATUS</code> request for itself. If the delegated plugin return an error result, the executing plugin should return an error result.</li>
</ul>
<p><strong>Input:</strong></p>
<p>The runtime will provide a json-serialized plugin configuration object (defined below) on standard in.</p>
<p>Optional environment parameters:</p>
<ul>
<li><code>CNI_PATH</code></li>
</ul>
<h4 id="version-probe-plugin-version-support"><a class="header" href="#version-probe-plugin-version-support"><code>VERSION</code>: probe plugin version support</a></h4>
<p>The plugin should output via standard-out a json-serialized version result object (see below).</p>
<p><strong>Input:</strong></p>
<p>A json-serialized object, with the following key:</p>
<ul>
<li><code>cniVersion</code>: The version of the protocol in use.</li>
</ul>
<p>Required environment parameters:</p>
<ul>
<li><code>CNI_COMMAND</code></li>
</ul>
<h4 id="gc-clean-up-any-stale-resources"><a class="header" href="#gc-clean-up-any-stale-resources"><code>GC</code>: Clean up any stale resources</a></h4>
<p>The GC command provides a way for runtimes to specify the expected set of attachments to a network.
The network plugin may then remove any resources related to attachments that do not exist in this set.</p>
<p>Resources may, for example, include:</p>
<ul>
<li>IPAM reservations</li>
<li>Firewall rules</li>
</ul>
<p>A plugin SHOULD remove as many stale resources as possible. For example, a plugin should remove any IPAM reservations associated with attachments not in the provided list. The plugin MAY assume that the isolation domain (e.g. network namespace) has been deleted, and thus any resources (e.g. network interfaces) therein have been removed.</p>
<p>Plugins should generally complete a <code>GC</code> action without error. If an error is encountered, a plugin should continue; removing as many resources as possible, and report the errors back to the runtime.</p>
<p>Plugins MUST, additionally, forward any GC calls to delegated plugins they are configured to use (see section 4).</p>
<p>The runtime MUST NOT use GC as a substitute for DEL. Plugins may be unable to clean up some resources from GC that they would have been able to clean up from DEL.</p>
<p><strong>Input:</strong></p>
<p>The runtime must provide a JSON-serialized plugin configuration object (defined below) on standard in. It contains an additional key;</p>
<ul>
<li><code>cni.dev/valid-attachments</code> (array of objects): The list of <strong>still valid</strong> attachments to this network:
<ul>
<li><code>containerID</code> (string): the value of CNI_CONTAINERID as provided during the CNI ADD operation</li>
<li><code>ifname</code> (string): the value of CNI_IFNAME as provided during the CNI ADD operation</li>
</ul>
</li>
</ul>
<p>Required environment parameters:</p>
<ul>
<li><code>CNI_COMMAND</code></li>
<li><code>CNI_PATH</code></li>
</ul>
<p><strong>Output:</strong>
No output on success, <a href="#Error">"error" result structure</a> on error.</p>
<h2 id="section-3-execution-of-network-configurations"><a class="header" href="#section-3-execution-of-network-configurations">Section 3: Execution of Network Configurations</a></h2>
<p>This section describes how a container runtime interprets a network configuration (as defined in section 1) and executes plugins accordingly. A runtime may wish to <em>add</em>, <em>delete</em>, or <em>check</em> a network configuration in a container. This results in a series of plugin <code>ADD</code>, <code>DELETE</code>, or <code>CHECK</code> executions, correspondingly. This section also defines how a network configuration is transformed and provided to the plugin.</p>
<p>The operation of a network configuration on a container is called an <em>attachment</em>. An attachment may be uniquely identified by the <code>(CNI_CONTAINERID, CNI_IFNAME)</code> tuple.</p>
<h3 id="lifecycle--ordering"><a class="header" href="#lifecycle--ordering">Lifecycle &amp; Ordering</a></h3>
<ul>
<li>The container runtime must create a new network namespace for the container before invoking any plugins.</li>
<li>The container runtime must not invoke parallel operations for the same container, but is allowed to invoke parallel operations for different containers. This includes across multiple attachments.
<ul>
<li><strong>Exception</strong>: The runtime must exclusively execute either <em>gc</em> or <em>add</em> and <em>delete</em>. The runtime must ensure that no <em>add</em> or <em>delete</em> operations are in progress before executing <em>gc</em>, and must wait for <em>gc</em> to complete before issuing new <em>add</em> or <em>delete</em> commands.</li>
</ul>
</li>
<li>Plugins must handle being executed concurrently across different containers. If necessary, they must implement locking on shared resources (e.g. IPAM databases).</li>
<li>The container runtime must ensure that <em>add</em> is eventually followed by a corresponding <em>delete</em>. The only exception is in the event of catastrophic failure, such as node loss. A <em>delete</em> must still be executed even if the <em>add</em> fails.</li>
<li><em>delete</em> may be followed by additional <em>deletes</em>.</li>
<li>The network configuration should not change between <em>add</em> and <em>delete</em>.</li>
<li>The network configuration should not change between <em>attachments</em>.</li>
<li>The container runtime is responsible for cleanup of the container's network namespace.</li>
</ul>
<h3 id="attachment-parameters"><a class="header" href="#attachment-parameters">Attachment Parameters</a></h3>
<p>While a network configuration should not change between <em>attachments</em>, there are certain parameters supplied by the container runtime that are per-attachment. They are:</p>
<ul>
<li><strong>Container ID:</strong> A unique plaintext identifier for a container, allocated by the runtime. Must not be empty.  Must start with an alphanumeric character, optionally followed by any combination of one or more alphanumeric characters, underscore (), dot (.) or hyphen (-). During execution, always set as the  <code>CNI_CONTAINERID</code> parameter.</li>
<li><strong>Namespace</strong>: A reference to the container's "isolation domain". If using network namespaces, then a path to the network namespace (e.g. <code>/run/netns/[nsname]</code>). During execution, always set as the <code>CNI_NETNS</code> parameter.</li>
<li><strong>Container interface name</strong>: Name of the interface to create inside the container. During execution, always set as the <code>CNI_IFNAME</code> parameter.</li>
<li><strong>Generic Arguments</strong>: Extra arguments, in the form of key-value string pairs, that are relevant to a specific attachment.  During execution, always set as the <code>CNI_ARGS</code> parameter.</li>
<li><strong>Capability Arguments</strong>: These are also key-value pairs. The key is a string, whereas the value is any JSON-serializable type. The keys and values are defined by <a href="CONVENTIONS.html">convention</a>.</li>
</ul>
<p>Furthermore, the runtime must be provided a list of paths to search for CNI plugins. This must also be provided to plugins during execution via the <code>CNI_PATH</code> environment variable.</p>
<h3 id="adding-an-attachment"><a class="header" href="#adding-an-attachment">Adding an attachment</a></h3>
<p>For every configuration defined in the <code>plugins</code> key of the network configuration,</p>
<ol>
<li>Look up the executable specified in the <code>type</code> field. If this does not exist, then this is an error.</li>
<li>Derive request configuration from the plugin configuration, with the following parameters:
<ul>
<li>If this is the first plugin in the list, no previous result is provided,</li>
<li>For all additional plugins, the previous result is the result of the previous plugins.</li>
</ul>
</li>
<li>Execute the plugin binary, with <code>CNI_COMMAND=ADD</code>. Provide parameters defined above as environment variables. Supply the derived configuration via standard in.</li>
<li>If the plugin returns an error, halt execution and return the error to the caller.</li>
</ol>
<p>The runtime must store the result returned by the final plugin persistently, as it is required for <em>check</em> and <em>delete</em> operations.</p>
<h3 id="deleting-an-attachment"><a class="header" href="#deleting-an-attachment">Deleting an attachment</a></h3>
<p>Deleting a network attachment is much the same as adding, with a few key differences:</p>
<ul>
<li>The list of plugins is executed in <strong>reverse order</strong></li>
<li>The previous result provided is always the final result of the <em>add</em> operation.</li>
</ul>
<p>For every plugin defined in the <code>plugins</code> key of the network configuration, <em>in reverse order</em>,</p>
<ol>
<li>Look up the executable specified in the <code>type</code> field. If this does not exist, then this is an error.</li>
<li>Derive request configuration from the plugin configuration, with the previous result from the initial <em>add</em> operation.</li>
<li>Execute the plugin binary, with <code>CNI_COMMAND=DEL</code>. Provide parameters defined above as environment variables. Supply the derived configuration via standard in.</li>
<li>If the plugin returns an error, halt execution and return the error to the caller.</li>
</ol>
<p>If all plugins return success, return success to the caller.</p>
<h3 id="checking-an-attachment"><a class="header" href="#checking-an-attachment">Checking an attachment</a></h3>
<p>The runtime may also ask every plugin to confirm that a given attachment is still functional. The runtime must use the same attachment parameters as it did for the <em>add</em> operation.</p>
<p>Checking is similar to add with two exceptions:</p>
<ul>
<li>the previous result provided is always the final result of the <em>add</em> operation.</li>
<li>If the network configuration defines <code>disableCheck</code>, then always return success to the caller.</li>
</ul>
<p>For every plugin defined in the <code>plugins</code> key of the network configuration,</p>
<ol>
<li>Look up the executable specified in the <code>type</code> field. If this does not exist, then this is an error.</li>
<li>Derive request configuration from the plugin configuration, with the previous result from the initial <em>add</em> operation.</li>
<li>Execute the plugin binary, with <code>CNI_COMMAND=CHECK</code>. Provide parameters defined above as environment variables. Supply the derived configuration via standard in.</li>
<li>If the plugin returns an error, halt execution and return the error to the caller.</li>
</ol>
<p>If all plugins return success, return success to the caller.</p>
<h3 id="garbage-collecting-a-network"><a class="header" href="#garbage-collecting-a-network">Garbage-collecting a network</a></h3>
<p>The runtime may also ask every plugin in a network configuration to clean up any stale resources via the <em>GC</em> command.</p>
<p>When garbage-collecting a configuration, there are no <a href="#attachment-parameters">Attachment Parameters</a>.</p>
<p>For every plugin defined in the <code>plugins</code> key of the network configuration,</p>
<ol>
<li>Look up the executable specified in the <code>type</code> field. If this does not exist, then this is an error.</li>
<li>Derive request configuration from the plugin configuration.</li>
<li>Execute the plugin binary, with <code>CNI_COMMAND=GC</code>. Supply the derived configuration via standard in.</li>
<li>If the plugin returns an error, <strong>continue</strong> with execution, returning all errors to the caller.</li>
</ol>
<p>If all plugins return success, return success to the caller.</p>
<h3 id="deriving-request-configuration-from-plugin-configuration"><a class="header" href="#deriving-request-configuration-from-plugin-configuration">Deriving request configuration from plugin configuration</a></h3>
<p>The network configuration format (which is a list of plugin configurations to execute) must be transformed to a format understood by the plugin (which is a single plugin configuration). This section describes that transformation.</p>
<p>The request configuration for a single plugin invocation is also JSON. It consists of the plugin configuration, primarily unchanged except for the specified additions and removals.</p>
<p>The following fields are always to be inserted into the request configuration by the runtime:</p>
<ul>
<li><code>cniVersion</code>: the protocol version selected by the runtime - the string "1.1.0"</li>
<li><code>name</code>: taken from the <code>name</code> field of the network configuration</li>
</ul>
<p>For attachment-specific operations (ADD, DEL, CHECK), additional field requirements apply:</p>
<ul>
<li><code>runtimeConfig</code>: the runtime must insert an object consisting of the union of capabilities provided by the plugin and requested by the runtime (more details below).</li>
<li><code>prevResult</code>: the runtime must insert consisting of the result type returned by the "previous" plugin. The meaning of "previous" is defined by the specific operation (<em>add</em>, <em>delete</em>, or <em>check</em>). This field must not be set for the first <em>add</em> in a chain.</li>
<li><code>capabilities</code>: must not be set</li>
</ul>
<p>For GC operations:</p>
<ul>
<li><code>cni.dev/valid-attachments</code>: as specified in section 2.</li>
</ul>
<p>All other fields not prefixed with <code>cni.dev/</code> should be passed through unaltered.</p>
<h4 id="deriving-runtimeconfig"><a class="header" href="#deriving-runtimeconfig">Deriving <code>runtimeConfig</code></a></h4>
<p>Whereas CNI_ARGS are provided to all plugins, with no indication if they are going to be consumed, <em>Capability arguments</em> need to be declared explicitly in configuration. The runtime, thus, can determine if a given network configuration supports a specific <em>capability</em>. Capabilities are not defined by the specification - rather, they are documented <a href="CONVENTIONS.html">conventions</a>.</p>
<p>As defined in section 1, the plugin configuration includes an optional key, <code>capabilities</code>. This example shows a plugin that supports the <code>portMapping</code> capability:</p>
<pre><code class="language-json">{
  "type": "myPlugin",
  "capabilities": {
    "portMappings": true
  }
}
</code></pre>
<p>The <code>runtimeConfig</code> parameter is derived from the <code>capabilities</code> in the network configuration and the <em>capability arguments</em> generated by the runtime. Specifically, any capability supported by the plugin configuration and provided by the runtime should be inserted in the <code>runtimeConfig</code>.</p>
<p>Thus, the above example could result in the following being passed to the plugin as part of the execution configuration:</p>
<pre><code class="language-json">{
  "type": "myPlugin",
  "runtimeConfig": {
    "portMappings": [ { "hostPort": 8080, "containerPort": 80, "protocol": "tcp" } ]
  }
  ...
}
</code></pre>
<h2 id="section-4-plugin-delegation"><a class="header" href="#section-4-plugin-delegation">Section 4: Plugin Delegation</a></h2>
<p>There are some operations that, for whatever reason, cannot reasonably be implemented as a discrete chained plugin. Rather, a CNI plugin may wish to delegate some functionality to another plugin. One common example of this is IP address management.</p>
<p>As part of its operation, a CNI plugin is expected to assign (and maintain) an IP address to the interface and install any necessary routes relevant for that interface. This gives the CNI plugin great flexibility but also places a large burden on it. Many CNI plugins would need to have the same code to support several IP management schemes that users may desire (e.g. dhcp, host-local). A CNI plugin may choose to delegate IP management to another plugin.</p>
<p>To lessen the burden and make IP management strategy be orthogonal to the type of CNI plugin, we define a third type of plugin -- IP Address Management Plugin (IPAM plugin), as well as a protocol for plugins to delegate functionality to other plugins.</p>
<p>It is however the responsibility of the CNI plugin, rather than the runtime, to invoke the IPAM plugin at the proper moment in its execution. The IPAM plugin must determine the interface IP/subnet, Gateway and Routes and return this information to the "main" plugin to apply. The IPAM plugin may obtain the information via a protocol (e.g. dhcp), data stored on a local filesystem, the "ipam" section of the Network Configuration file, etc.</p>
<h3 id="delegated-plugin-protocol"><a class="header" href="#delegated-plugin-protocol">Delegated Plugin protocol</a></h3>
<p>Like CNI plugins, delegated plugins are invoked by running an executable. The executable is searched for in a predefined list of paths, indicated to the CNI plugin via <code>CNI_PATH</code>. The delegated plugin must receive all the same environment variables that were passed in to the CNI plugin. Just like the CNI plugin, delegated plugins receive the network configuration via stdin and output results via stdout.</p>
<p>Delegated plugins are provided the <em>complete network configuration</em> passed to the "upper" plugin. In other words, in the IPAM case, not just the <code>ipam</code> section of the configuration.</p>
<p>Success is indicated by a zero return code and a <em>Success</em> result type output to stdout.</p>
<h3 id="delegated-plugin-execution-procedure"><a class="header" href="#delegated-plugin-execution-procedure">Delegated plugin execution procedure</a></h3>
<p>When a plugin executes a delegated plugin, it should:</p>
<ul>
<li>Look up the plugin binary by searching the directories provided in <code>CNI_PATH</code> environment variable.</li>
<li>Execute that plugin with the same environment and configuration that it received.</li>
<li>Ensure that the delegated plugin's stderr is output to the calling plugin's stderr.</li>
</ul>
<p>If a plugin is executed with <code>CNI_COMMAND=CHECK</code>, <code>DEL</code>, or <code>GC</code>, it must also execute any delegated plugins. If any of the delegated plugins return error, error should be returned by the upper plugin.</p>
<p>If, on <code>ADD</code>, a delegated plugin fails, the "upper" plugin should execute again with <code>DEL</code> before returning failure.</p>
<h2 id="section-5-result-types"><a class="header" href="#section-5-result-types">Section 5: Result Types</a></h2>
<p>For certain operations, plugins must output result information. The output should be serialized as JSON on standard out.</p>
<h3 id="add-success"><a class="header" href="#add-success">ADD Success</a></h3>
<p>Plugins must output a JSON object with the following keys upon a successful <code>ADD</code> operation:</p>
<ul>
<li><code>cniVersion</code>: The same version supplied on input - the string "1.1.0"</li>
<li><code>interfaces</code>: An array of all interfaces created by the attachment, including any host-level interfaces:
<ul>
<li><code>name</code> (string): The name of the interface.</li>
<li><code>mac</code> (string): The hardware address of the interface (if applicable).</li>
<li><code>mtu</code>: (uint) The MTU of the interface (if applicable).</li>
<li><code>sandbox</code> (string): The isolation domain reference (e.g. path to network namespace) for the interface, or empty if on the host. For interfaces created inside the container, this should be the value passed via <code>CNI_NETNS</code>.</li>
<li><code>socketPath</code> (string, optional): An absolute path to a socket file corresponding to this interface, if applicable.</li>
<li><code>pciID</code> (string, optional): The platform-specific identifier of the PCI device corresponding to this interface, if applicable.</li>
</ul>
</li>
<li><code>ips</code>: IPs assigned by this attachment. Plugins may include IPs assigned external to the container.
<ul>
<li><code>address</code> (string): an IP address in CIDR notation (eg "192.168.1.3/24").</li>
<li><code>gateway</code> (string): the default gateway for this subnet, if one exists.</li>
<li><code>interface</code> (uint): the index into the <code>interfaces</code> list for a <a href="#result">CNI Plugin Result</a> indicating which interface this IP configuration should be applied to.</li>
</ul>
</li>
<li><code>routes</code>: Routes created by this attachment:
<ul>
<li><code>dst</code>: The destination of the route, in CIDR notation</li>
<li><code>gw</code>: The next hop address. If unset, a value in <code>gateway</code> in the <code>ips</code> array may be used.</li>
<li><code>mtu</code> (uint): The MTU (Maximum transmission unit) along the path to the destination.</li>
<li><code>advmss</code> (uint): The MSS (Maximal Segment Size) to advertise to these destinations when establishing TCP connections.</li>
<li><code>priority</code> (uint): The priority of route, lower is higher.</li>
<li><code>table</code> (uint): The table to add the route to.</li>
<li><code>scope</code> (uint): The scope of the destinations covered by the route prefix (global (0), link (253), host (254)).</li>
</ul>
</li>
<li><code>dns</code>: a dictionary consisting of DNS configuration information
<ul>
<li><code>nameservers</code> (list of strings): list of a priority-ordered list of DNS nameservers that this network is aware of. Each entry in the list is a string containing either an IPv4 or an IPv6 address.</li>
<li><code>domain</code> (string): the local domain used for short hostname lookups.</li>
<li><code>search</code> (list of strings): list of priority ordered search domains for short hostname lookups. Will be preferred over <code>domain</code> by most resolvers.</li>
<li><code>options</code> (list of strings): list of options that can be passed to the resolver.</li>
</ul>
</li>
</ul>
<p>Plugins provided a <code>prevResult</code> key as part of their request configuration must output it as their result, with any possible modifications made by that plugin included. If a plugin makes no changes that would be reflected in the <em>Success result</em> type, then it must output a result equivalent to the provided <code>prevResult</code>.</p>
<h4 id="delegated-plugins-ipam"><a class="header" href="#delegated-plugins-ipam">Delegated plugins (IPAM)</a></h4>
<p>Delegated plugins may omit irrelevant sections.</p>
<p>Delegated IPAM plugins must return an abbreviated <em>Success</em> object. Specifically, it is missing the <code>interfaces</code> array, as well as the <code>interface</code> entry in <code>ips</code>.</p>
<h3 id="version-success"><a class="header" href="#version-success">VERSION Success</a></h3>
<p>Plugins must output a JSON object with the following keys upon a <code>VERSION</code> operation:</p>
<ul>
<li><code>cniVersion</code>: The value of <code>cniVersion</code> specified on input</li>
<li><code>supportedVersions</code>: A list of supported specification versions</li>
</ul>
<p>Example:</p>
<pre><code class="language-json">{
    "cniVersion": "1.0.0",
    "supportedVersions": [ "0.1.0", "0.2.0", "0.3.0", "0.3.1", "0.4.0", "1.0.0" ]
}
</code></pre>
<h3 id="error"><a class="header" href="#error">Error</a></h3>
<p>Plugins should output a JSON object with the following keys if they encounter an error:</p>
<ul>
<li><code>cniVersion</code>: The protocol version in use - "1.1.0"</li>
<li><code>code</code>: A numeric error code, see below for reserved codes.</li>
<li><code>msg</code>: A short message characterizing the error.</li>
<li><code>details</code>: A longer message describing the error.</li>
</ul>
<p>Example:</p>
<pre><code class="language-json">{
  "cniVersion": "1.1.0",
  "code": 7,
  "msg": "Invalid Configuration",
  "details": "Network 192.168.0.0/31 too small to allocate from."
}
</code></pre>
<p>Error codes 0-99 are reserved for well-known errors. Values of 100+ can be freely used for plugin specific errors.</p>
<div class="table-wrapper"><table><thead><tr><th>Error Code</th><th>Error Description</th></tr></thead><tbody>
<tr><td><code>1</code></td><td>Incompatible CNI version</td></tr>
<tr><td><code>2</code></td><td>Unsupported field in network configuration. The error message must contain the key and value of the unsupported field.</td></tr>
<tr><td><code>3</code></td><td>Container unknown or does not exist. This error implies the runtime does not need to perform any container network cleanup (for example, calling the <code>DEL</code> action on the container).</td></tr>
<tr><td><code>4</code></td><td>Invalid necessary environment variables, like CNI_COMMAND, CNI_CONTAINERID, etc. The error message must contain the names of invalid variables.</td></tr>
<tr><td><code>5</code></td><td>I/O failure. For example, failed to read network config bytes from stdin.</td></tr>
<tr><td><code>6</code></td><td>Failed to decode content. For example, failed to unmarshal network config from bytes or failed to decode version info from string.</td></tr>
<tr><td><code>7</code></td><td>Invalid network config. If some validations on network configs do not pass, this error will be raised.</td></tr>
<tr><td><code>11</code></td><td>Try again later. If the plugin detects some transient condition that should clear up, it can use this code to notify the runtime it should re-try the operation later.</td></tr>
</tbody></table>
</div>
<p>In addition, stderr can be used for unstructured output such as logs.</p>
<h3 id="version-1"><a class="header" href="#version-1">Version</a></h3>
<p>Plugins must output a JSON object with the following keys upon a <code>VERSION</code> operation:</p>
<ul>
<li><code>cniVersion</code>: The value of <code>cniVersion</code> specified on input</li>
<li><code>supportedVersions</code>: A list of supported specification versions</li>
</ul>
<p>Example:</p>
<pre><code class="language-json">{
    "cniVersion": "1.1.0",
    "supportedVersions": [ "0.1.0", "0.2.0", "0.3.0", "0.3.1", "0.4.0", "1.0.0", "1.1.0" ]
}
</code></pre>
<h2 id="appendix-examples"><a class="header" href="#appendix-examples">Appendix: Examples</a></h2>
<p>We assume the network configuration <a href="#Example-configuration">shown above</a> in section 1. For this attachment, the runtime produces <code>portmap</code> and <code>mac</code> capability args, along with the generic argument "argA=foo".
The examples uses <code>CNI_IFNAME=eth0</code>.</p>
<h3 id="add-example"><a class="header" href="#add-example">Add example</a></h3>
<p>The container runtime would perform the following steps for the <code>add</code> operation.</p>
<ol>
<li>Call the <code>bridge</code> plugin with the following JSON, <code>CNI_COMMAND=ADD</code>:</li>
</ol>
<pre><code class="language-json">{
    "cniVersion": "1.1.0",
    "name": "dbnet",
    "type": "bridge",
    "bridge": "cni0",
    "keyA": ["some more", "plugin specific", "configuration"],
    "ipam": {
        "type": "host-local",
        "subnet": "10.1.0.0/16",
        "gateway": "10.1.0.1"
    },
    "dns": {
        "nameservers": [ "10.1.0.1" ]
    }
}
</code></pre>
<p>The bridge plugin, as it delegates IPAM to the <code>host-local</code> plugin, would execute the <code>host-local</code> binary with the exact same input, <code>CNI_COMMAND=ADD</code>.</p>
<p>The <code>host-local</code> plugin returns the following result:</p>
<pre><code class="language-json">{
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1"
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
}
</code></pre>
<p>The bridge plugin returns the following result, configuring the interface according to the delegated IPAM configuration:</p>
<pre><code class="language-json">{
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "99:88:77:66:55:44",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
}
</code></pre>
<ol start="2">
<li>Next, call the <code>tuning</code> plugin, with <code>CNI_COMMAND=ADD</code>. Note that <code>prevResult</code> is supplied, along with the <code>mac</code> capability argument. The request configuration passed is:</li>
</ol>
<pre><code class="language-json">{
  "cniVersion": "1.1.0",
  "name": "dbnet",
  "type": "tuning",
  "sysctl": {
    "net.core.somaxconn": "500"
  },
  "runtimeConfig": {
    "mac": "00:11:22:33:44:66"
  },
  "prevResult": {
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "99:88:77:66:55:44",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
  }
}
</code></pre>
<p>The plugin returns the following result. Note that the <strong>mac</strong> has changed.</p>
<pre><code class="language-json">{
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "00:11:22:33:44:66",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
}
</code></pre>
<ol start="3">
<li>Finally, call the <code>portmap</code> plugin, with <code>CNI_COMMAND=ADD</code>. Note that <code>prevResult</code> matches that returned by <code>tuning</code>:</li>
</ol>
<pre><code class="language-json">{
  "cniVersion": "1.1.0",
  "name": "dbnet",
  "type": "portmap",
  "runtimeConfig": {
    "portMappings" : [
      { "hostPort": 8080, "containerPort": 80, "protocol": "tcp" }
    ]
  },
  "prevResult": {
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "00:11:22:33:44:66",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
  }
}
</code></pre>
<p>The <code>portmap</code> plugin outputs the exact same result as that returned by <code>bridge</code>, as the plugin has not modified anything that would change the result (i.e. it only created iptables rules).</p>
<h3 id="check-example"><a class="header" href="#check-example">Check example</a></h3>
<p>Given the previous <em>Add</em>, the container runtime would perform the following steps for the <em>Check</em> action:</p>
<ol>
<li>First call the <code>bridge</code> plugin with the following request configuration, including the <code>prevResult</code> field containing the final JSON response from the <em>Add</em> operation, <strong>including the changed mac</strong>. <code>CNI_COMMAND=CHECK</code></li>
</ol>
<pre><code class="language-json">{
  "cniVersion": "1.1.0",
  "name": "dbnet",
  "type": "bridge",
  "bridge": "cni0",
  "keyA": ["some more", "plugin specific", "configuration"],
  "ipam": {
    "type": "host-local",
    "subnet": "10.1.0.0/16",
    "gateway": "10.1.0.1"
  },
  "dns": {
    "nameservers": [ "10.1.0.1" ]
  },
  "prevResult": {
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "00:11:22:33:44:66",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
  }
}
</code></pre>
<p>The <code>bridge</code> plugin, as it delegates IPAM, calls <code>host-local</code>, <code>CNI_COMMAND=CHECK</code>. It returns no error.</p>
<p>Assuming the <code>bridge</code> plugin is satisfied, it produces no output on standard out and exits with a 0 return code.</p>
<ol start="2">
<li>Next call the <code>tuning</code> plugin with the following request configuration:</li>
</ol>
<pre><code class="language-json">{
  "cniVersion": "1.1.0",
  "name": "dbnet",
  "type": "tuning",
  "sysctl": {
    "net.core.somaxconn": "500"
  },
  "runtimeConfig": {
    "mac": "00:11:22:33:44:66"
  },
  "prevResult": {
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "00:11:22:33:44:66",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
  }
}
</code></pre>
<p>Likewise, the <code>tuning</code> plugin exits indicating success.</p>
<ol start="3">
<li>Finally, call <code>portmap</code> with the following request configuration:</li>
</ol>
<pre><code class="language-json">{
  "cniVersion": "1.1.0",
  "name": "dbnet",
  "type": "portmap",
  "runtimeConfig": {
    "portMappings" : [
      { "hostPort": 8080, "containerPort": 80, "protocol": "tcp" }
    ]
  },
  "prevResult": {
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "00:11:22:33:44:66",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
  }
}
</code></pre>
<h3 id="delete-example"><a class="header" href="#delete-example">Delete example</a></h3>
<p>Given the same network configuration JSON list, the container runtime would perform the following steps for the <em>Delete</em> action.
Note that plugins are executed in reverse order from the <em>Add</em> and <em>Check</em> actions.</p>
<ol>
<li>First, call <code>portmap</code> with the following request configuration, <code>CNI_COMMAND=DEL</code>:</li>
</ol>
<pre><code class="language-json">{
  "cniVersion": "1.1.0",
  "name": "dbnet",
  "type": "portmap",
  "runtimeConfig": {
    "portMappings" : [
      { "hostPort": 8080, "containerPort": 80, "protocol": "tcp" }
    ]
  },
  "prevResult": {
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "00:11:22:33:44:66",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
  }
}
</code></pre>
<ol start="2">
<li>Next, call the <code>tuning</code> plugin with the following request configuration, <code>CNI_COMMAND=DEL</code>:</li>
</ol>
<pre><code class="language-json">{
  "cniVersion": "1.1.0",
  "name": "dbnet",
  "type": "tuning",
  "sysctl": {
    "net.core.somaxconn": "500"
  },
  "runtimeConfig": {
    "mac": "00:11:22:33:44:66"
  },
  "prevResult": {
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "00:11:22:33:44:66",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
  }
}
</code></pre>
<ol start="3">
<li>Finally, call <code>bridge</code>:</li>
</ol>
<pre><code class="language-json">{
  "cniVersion": "1.1.0",
  "name": "dbnet",
  "type": "bridge",
  "bridge": "cni0",
  "keyA": ["some more", "plugin specific", "configuration"],
  "ipam": {
    "type": "host-local",
    "subnet": "10.1.0.0/16",
    "gateway": "10.1.0.1"
  },
  "dns": {
    "nameservers": [ "10.1.0.1" ]
  },
  "prevResult": {
    "ips": [
        {
          "address": "10.1.0.5/16",
          "gateway": "10.1.0.1",
          "interface": 2
        }
    ],
    "routes": [
      {
        "dst": "0.0.0.0/0"
      }
    ],
    "interfaces": [
        {
            "name": "cni0",
            "mac": "00:11:22:33:44:55"
        },
        {
            "name": "veth3243",
            "mac": "55:44:33:22:11:11"
        },
        {
            "name": "eth0",
            "mac": "00:11:22:33:44:66",
            "sandbox": "/var/run/netns/blue"
        }
    ],
    "dns": {
      "nameservers": [ "10.1.0.1" ]
    }
  }
}
</code></pre>
<p>The bridge plugin executes the <code>host-local</code> delegated plugin with <code>CNI_COMMAND=DEL</code> before returning.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="economics/indian-economics/02-growth-development-and-happiness.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="economics/indian-economics/02-growth-development-and-happiness.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
