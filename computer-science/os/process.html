<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Process - Parikshit&#x27;s Notebook</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../../mathematics/index.html">Mathematics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../mathematics/formulas/index.html">Formulas</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../mathematics/formulas/algebra.html">Algebra</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../computer-science/index.html">Computer Science</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science/os/index.html">Operating System</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../computer-science/os/process.html" class="active">Process</a></li><li class="chapter-item "><a href="../../computer-science/os/ipc.html">Interprocess Communication</a></li></ol></li><li class="chapter-item "><a href="../../computer-science/dbms/index.html">Database Management System</a></li><li class="chapter-item "><a href="../../computer-science/networking/index.html">Computer Network</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../computer-science/networking/reference-models/index.html">Reference Models</a></li><li class="chapter-item "><a href="../../computer-science/networking/physical-layer/index.html">Physical Layer</a></li><li class="chapter-item "><a href="../../computer-science/networking/data-link-layer/index.html">Data Link Layer</a></li><li class="chapter-item "><a href="../../computer-science/networking/network-layer/index.html">Network Layer</a></li><li class="chapter-item "><a href="../../computer-science/networking/transport-layer/index.html">Transport Layer</a></li><li class="chapter-item "><a href="../../computer-science/networking/application-layer/index.html">Application Layer</a></li></ol></li><li class="chapter-item "><a href="../../computer-science/dsa/index.html">Data Structure & Algorithms</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../computer-science/dsa/stl-cheatsheet.html">STL Cheatsheet</a></li><li class="chapter-item "><a href="../../computer-science/dsa/searching.html">Searching</a></li><li class="chapter-item "><a href="../../computer-science/dsa/sorting.html">Sorting</a></li></ol></li><li class="chapter-item "><a href="../../computer-science/toc/index.html">Theory of Computation</a></li></ol></li><li class="chapter-item "><a href="../../aiml/index.html">AI/ML</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../aiml/ml-algos/index.html">ML Algorithms</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../aiml/ml-algos/regression/index.html">Regression</a></li><li class="chapter-item "><a href="../../aiml/ml-algos/classification/index.html">Classification</a></li><li class="chapter-item "><a href="../../aiml/ml-algos/clustering/index.html">Clustering</a></li><li class="chapter-item "><a href="../../aiml/ml-algos/forecasting/index.html">Forecasting</a></li></ol></li><li class="chapter-item "><a href="../../aiml/deep-learning/index.html">Deep Learning</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../aiml/deep-learning/full-connected/00-basics.html">Fully Connected</a></li><li class="chapter-item "><a href="../../aiml/deep-learning/activation-functions/index.html">Activation Functions</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../linux/index.html">Linux</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../linux/networking/index.html">Networking</a></li></ol></li><li class="chapter-item "><a href="../../economics/index.html">Economics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../economics/indian-economics/index.html">Indian Economics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../economics/indian-economics/01-introduction.html">01 Introduction</a></li><li class="chapter-item "><a href="../../economics/indian-economics/02-growth-development-and-happiness.html">02 Growth, Development & Happiness</a></li><li class="chapter-item "><a href="../../SPEC.html">XX</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Parikshit&#x27;s Notebook</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="process"><a class="header" href="#process">Process</a></h1>
<p><strong>Process</strong>: It is a program in execution. A process is the unit of work in a modern time-sharing
system.</p>
<p>We can divide processes as system processes executing system code and user processes executing user code.</p>
<p>A batch system executes job while time shared system has user programs or task.</p>
<h2 id="process-1"><a class="header" href="#process-1">Process</a></h2>
<p>A process is more than the program code, which is sometimes known as the <strong>text section.</strong> It also includes the current activity, as represented by the value of the <strong>program counter and the contents of the processor's registers.</strong> A process generally also includes the <strong>process stack, which contains temporary data (such as function parameters, return addresses, and local variables), and a data section, which contains global variables.</strong> A process may also include a <strong>heap</strong>, which is memory that is dynamically allocated during process run time.</p>
<p><img src="./images/process-in-memory.png" alt="Process in memory" /></p>
<h3 id="process-state"><a class="header" href="#process-state">Process State</a></h3>
<p>Each process is in one of the following state.</p>
<ul>
<li><strong>New</strong>: The Process is being created</li>
<li><strong>Running</strong>: Instructions are being executed</li>
<li><strong>Waiting</strong>: It is waiting for some event to occure like I/O</li>
<li><strong>Ready</strong>: The process is wating to be assigned to a processor</li>
<li><strong>Terminated</strong>: The process has finished execution</li>
</ul>
<p><img src="./images/process-states.png" alt="Process States" /></p>
<blockquote>
<p><strong>Note</strong>: Only one process can be running on any processor at any instant.</p>
</blockquote>
<h3 id="process-control-blockpcb--task-control-block"><a class="header" href="#process-control-blockpcb--task-control-block">Process Control Block(PCB) / Task Control Block</a></h3>
<p>It contains information about process. Some of it is below:</p>
<ul>
<li><strong>Process State</strong></li>
<li><strong>Program Counter</strong>: Address of next instruction</li>
<li><strong>CPU registers</strong>: registers vary in number &amp; types as per architecture of CPU. Examples, accumulators, index registers, stack pointers, general purpose registers</li>
<li><strong>CPU scheduling info</strong>: Includes process priority, pointers to scheduling queues, and any other scheduling parameters.</li>
<li><strong>Memory management info</strong>: includes value of base &amp; limit registers, page tables or segment tables depending on memory system.</li>
<li><strong>Accounting Info</strong>: Includes amount of CPU &amp; real time used, time limits, account numbers, job / process numbers etc</li>
<li><strong>I/O status info</strong>: includes list of I/O devices allocated to process, list of open files.</li>
</ul>
<p>PCB in Linux is represented by <a href="https://github.com/torvalds/linux/blob/v6.10/include/linux/sched.h#L748"><code>task_struct</code></a>. All <code>task_struct</code> are kept in doubly linked list.</p>
<p><img src="./images/process-control-block.png" alt="Process control block" /></p>
<h3 id="threads"><a class="header" href="#threads">Threads</a></h3>
<p>Process is a program that performs single threads of execution. But modern systems allows a process to have multiple threads of execution &amp; thus to perform more than one task at a time.</p>
<blockquote>
<p>On a system that supports threads, the PCB is expanded to include information for each thread.</p>
</blockquote>
<p><img src="./images/cpu-switch.png" alt="CPU switch from process to another" /></p>
<h2 id="process-scheduling"><a class="header" href="#process-scheduling">Process Scheduling</a></h2>
<ul>
<li>Object of Multiprogramming: To maximize CPU utilization, CPU should be running all time</li>
<li>That can be achieved by switching processes on CPU</li>
<li>Process schedular selects available process for program execution on CPU.</li>
</ul>
<h3 id="scheduling-queues"><a class="header" href="#scheduling-queues">Scheduling queues</a></h3>
<p>The processed enter the system , they are put into <strong>job queue</strong>, which consistes of all processes in the system. The processes that are residing in main memory and are ready &amp; waiting to execute are kept on list called <strong>ready queue</strong>.</p>
<p>This queue is generally stored as <strong>linked list</strong>.</p>
<p><img src="./images/scheduler-queues.png" alt="Ready queue &amp; IO queues" /></p>
<p>The list of proceses waiting for particular I/O device is called <strong>device queue</strong>. each device has its own device queue. In above image, we have magnetic tape, disk queues.</p>
<h3 id="queueing-diagram"><a class="header" href="#queueing-diagram">Queueing Diagram</a></h3>
<p><img src="./images/queueing-diagream-of-process-scheduling.png" alt="Queueing diagram of process scheduling" /></p>
<p>A new process is initially put in ready queue. It waits there until it is selected for execution, or is dispatched.</p>
<h3 id="schedulers"><a class="header" href="#schedulers">Schedulers</a></h3>
<p>schedular select process from queue for execution.</p>
<h4 id="2-types-of-schedulars"><a class="header" href="#2-types-of-schedulars">2 Types of schedulars</a></h4>
<ol>
<li><strong>Long term scheduler or Job scheduler</strong>: selects processes from mass-storage device (disk) and loads them into memory for execution.</li>
<li><strong>Short-term scheduler or CPU scheduler</strong>: selects from among the processes that are ready to execute and allocates CPU to one of them.</li>
</ol>
<p>Differece lies in frequenct. Short term scheduler must select process for CPU frequently. <strong>The long term schedular controls degree of multiprogramming (number of processes in memory</strong></p>
<blockquote>
<p>I/O bound process <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">→</span></span></span></span> more time spends doing IO than computation while CPU-Bound is exactly opposite.</p>
</blockquote>
<blockquote>
<p>Time sharing systems like UNIX and Windows oftern have no long-term schedular but simply put every new process in memory for the short term schedular.</p>
</blockquote>
<p><strong>Medium term schedular</strong>:  it is sometimes advantageous to remove processes from memory (and from active contention for CPU) and thus reduce the degree of multiprogramming. Later process can be reintroduced into memory and its execution can be continued where it left off. This scheme is called <strong>swapping</strong>.</p>
<p><img src="./images/queueing-diagream-of-process-scheduling-with-medium-term-scheduling.png" alt="Queueing diagram with medium term scheduling" /></p>
<h2 id="context-switch"><a class="header" href="#context-switch">Context Switch</a></h2>
<p>interrupts cause the OS to change CPU from its current task and to run <strong>kernel routine</strong>. When interrupt occurs, system needs to save the current <strong>context</strong> of process running on CPU so that it can restore that context when its processing is done.</p>
<p>When context switch occurs, the kernel perform <em>state save</em> of old process in its PCB and <em>state restore</em> for saved context of new process scheduled to run.</p>
<blockquote>
<p>Context switch time is <strong>pure overhead</strong>, because system does no useful work while switching.</p>
</blockquote>
<h2 id="operations-on-processes"><a class="header" href="#operations-on-processes">Operations on Processes</a></h2>
<h3 id="process-creation"><a class="header" href="#process-creation">Process Creation</a></h3>
<ul>
<li>process can create new processes via syscalls like <code>fork</code>. child processes inherits address space of parent.</li>
<li>child process can call <code>exec</code> syscall to change memory space with new program.</li>
<li>example, <a href="https://github.com/lets-learn-it/c-learning/tree/master/18-process">more examples</a></li>
</ul>
<pre><code class="language-c">#define _GNU_SOURCE
#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/wait.h&gt;

int main(int argc, char const *argv[]) {
  pid_t p = getpid();
  printf("My Process Id: %d\n", p);

  /* create new process */
  pid_t child = fork();

  if (child == 0) {
    printf("I am child!!! (%d)\n", getpid());
  } else {
    int rv = 0, exit_code = -1;
    pid_t c = wait(&amp;rv);
    if (WIFEXITED(rv)) {
      exit_code = WEXITSTATUS(rv);
    }
    printf("I am Parent!!! (%d). Child (%d) exited. Exit code: %d\n",
        getpid(), c, exit_code);
  }
  return 0;
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../computer-science/os/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../computer-science/os/ipc.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../computer-science/os/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../computer-science/os/ipc.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
